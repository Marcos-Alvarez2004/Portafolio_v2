---
import TitleSections from "@/components/TitleSections.astro"
import ScrollAnimation from "@/components/scrollAnimation/ScrollAnimation"
---

<section id="contacto" class="padd">
  <ScrollAnimation client:load>
    <TitleSections title_section="Contacto" />
  </ScrollAnimation>
  <div class="flex flex-col w-full form rounded-md">
    <form id="form" action="https://api.web3forms.com/submit" method="POST" class="flex flex-col gap-4 justify-center gap-y-8">
       <input type="hidden" name="access_key" value="c79655bc-67e2-41cd-b521-1b71c9ca64eb">
      <ScrollAnimation client:load>
        <p>Si deseas contactarme, puedes enviarme un mensaje a mi correo electrónico: <b class="underline">maaarcosaaavarez13@gmail.com</b><br>
        También puedes completar el formulario o contactarme a través de mis redes sociales.
        </p>
      </ScrollAnimation>
      <div class="input-group w-full">
        <ScrollAnimation client:load>
          <input required type="text" name="Nombre" id="name" class="input" autocomplete="nope" placeholder=" ">
          <label class="user-label bg-none" for="name">Nombre</label>
        </ScrollAnimation>
      </div>
      <div class="input-group w-full">
        <ScrollAnimation client:load>
          <input required type="email" name="Email" id="email" class="input" autocomplete="nope"  placeholder=" ">
          <label class="user-label" for="email">Gmail</label>
        </ScrollAnimation>
      </div>
        <div class="input-group w-full mt-4">
          <ScrollAnimation client:load>
            <textarea name="Mensaje" id="message" required class="w-full input bg-transparent rounded min-h-56 resize-none" maxlength="500" autocomplete="nope"  placeholder=" "></textarea>
            <label class="user-label" for="message">Mensaje</label>
          </ScrollAnimation>
        </div>
        
      <div class="flex flex-col gap-y-8 lg:flex-row lg:gap-y-0 justify-center lg:justify-between lg:items-center">
        <div class="flex justify-center items-center flex-col gap-4">
          <ScrollAnimation client:load>
            <h1 class="text-md underline">Redes sociales:</h1>
          </ScrollAnimation>
          <div class="flex text-3xl list-none">
          <ScrollAnimation client:load>
            <a aria-label="Github" target="_blank" rel="noopener noreferrer" href="https://github.com/Marcos-Alvarez2004">
              <div class="cursor-pointer hoverColor">
                <i class='bx bxl-github opacity-60 px-4'></i>
              </div>
            </a>
          </ScrollAnimation>
          <ScrollAnimation client:load>
            <a aria-label="LinkedIn" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/in/marcosalvarezmedero?utm_source=share&utm_campaign=share_via&utm_content=profile&utm_medium=android_app">
              <div class="cursor-pointer hoverColor">
                <i class='bx bxl-linkedin-square opacity-60 px-4'></i>
              </div>
            </a>
          </ScrollAnimation>
          </div>
        </div>
        
        
        <ScrollAnimation client:load>   
            <button class="py-4 text-center rounded-md lg:w-64 w-full" type="submit" id="formBtn">
              Enviar 
            </button>
        </ScrollAnimation>      
      </div>
      <p id="formMessage"></p>
    </form>
  </div>
</section>

<style>
input:-webkit-autofill {
  -webkit-box-shadow: 0 0 0 1000px none inset !important; 
  box-shadow: 0 0 0 1000px none inset !important;
  -webkit-text-fill-color: var(--color-general) !important; 
  transition: background-color 5000s ease-in-out 0s; 
}

button:hover {
  background-color: var(--background-hover-btn);
  color: var(--color-hover-btn);
}

/* INPUT */
input:-webkit-autofill:focus {
  -webkit-box-shadow: 0 0 0 50px var(--bg-primary) inset;
  -webkit-text-fill-color: var(--color-general);
}

.input-group {
  position: relative;
}

span {
  color: var(--color-gray);
}

b, h3, h2 {
  color: var(--color-primary);
}

.input {
  border: var(--border-secondary);
  width: 100%;
  border-radius: .25rem;
  background: none;
  padding: 1rem;
  transition: border 150ms cubic-bezier(0.4,0,0.2,1);
}

.user-label {
  position: absolute;
  left: .8rem;
  color: var(--color-general);
  pointer-events: none;
  transform: translateY(1rem);
  transition: 150ms cubic-bezier(0.4,0,0.2,1);
}

.input:focus, .input:not(:placeholder-shown) {
  outline: none;
  border: .1rem solid var(--color-primary);
}

.input:focus ~ label, .input:not(:placeholder-shown) ~ label {
  transform: translateY(-50%) scale(0.8);
  background-color: var(--bg-primary);
  padding: 0 .5rem;
  color: var(--color-primary);
}

.hoverColor:hover i {
  opacity: 1;
  color: var(--color-primary);
}
</style>

<script type="module" is:inline>
const form = document.getElementById('form');
const message = document.getElementById("formMessage");
const button = document.getElementById("formBtn");

  form.addEventListener("submit", async (e) => {
    e.preventDefault();

    message.textContent = "Enviando...";
    message.className = "text-blue-500 text-center mt-2 text-xs";

    const formData = new FormData(form);

    const response = await fetch("https://api.web3forms.com/submit", {
      method: "POST",
      body: formData
    });

    const result = await response.json();

    if (result.success) {
      message.textContent = "Mensaje enviado con éxito.";
      message.className = "text-green-600 text-center mt-2 text-xs";
      form.reset(); 
    } else {
      message.textContent = "Ocurrió un error. Inténtalo de nuevo.";
      message.className = "text-red-600 text-center mt-2 text-xs";
    }
  });


button.disabled = true;

button.disabled = false;
</script>